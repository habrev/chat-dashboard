{"ast":null,"code":"var _jsxFileName = \"/home/samuel/Desktop/chat-dash/chat-dashboard/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:3001');\nfunction App() {\n  _s();\n  const [username, setUsername] = useState('');\n  const [joined, setJoined] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    console.log('Fetching history from /history');\n    fetch('/history').then(res => {\n      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n      return res.json();\n    }).then(data => setMessages(data)).catch(error => console.error('Fetch error:', error.message));\n    socket.on('chat message', msg => {\n      setMessages(prev => [...prev, msg]);\n    });\n    socket.on('users update', updatedUsers => {\n      setUsers(updatedUsers);\n    });\n    return () => {\n      socket.off('chat message');\n      socket.off('users update');\n    };\n  }, []);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const handleJoin = () => {\n    if (username.trim()) {\n      socket.emit('join', username);\n      setJoined(true);\n    }\n  };\n  const sendMessage = () => {\n    if (newMessage.trim()) {\n      socket.emit('chat message', newMessage);\n      setNewMessage('');\n    }\n  };\n  if (!joined) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"join-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Join Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter username\",\n        value: username,\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleJoin,\n        children: \"Join\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages\",\n        ref: messagesEndRef,\n        children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [msg.username, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 28\n          }, this), \" \", msg.message]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Type a message\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendMessage,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"users-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Online Users (\", users.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: users.map((user, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: user\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Bcit/xyK5oAIzNZIWBOoAhQWClU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","jsxDEV","_jsxDEV","socket","App","_s","username","setUsername","joined","setJoined","messages","setMessages","users","setUsers","newMessage","setNewMessage","messagesEndRef","console","log","fetch","then","res","ok","Error","status","json","data","catch","error","message","on","msg","prev","updatedUsers","off","_messagesEndRef$curre","current","scrollIntoView","behavior","handleJoin","trim","emit","sendMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","ref","map","index","length","user","_c","$RefreshReg$"],"sources":["/home/samuel/Desktop/chat-dash/chat-dashboard/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\nimport './App.css';\n\nconst socket = io('http://localhost:3001');\n\nfunction App() {\n  const [username, setUsername] = useState('');\n  const [joined, setJoined] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    console.log('Fetching history from /history');\n    fetch('/history')\n      .then(res => {\n        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n        return res.json();\n      })\n      .then(data => setMessages(data))\n      .catch(error => console.error('Fetch error:', error.message));\n\n    socket.on('chat message', (msg) => {\n      setMessages((prev) => [...prev, msg]);\n    });\n\n    socket.on('users update', (updatedUsers) => {\n      setUsers(updatedUsers);\n    });\n\n    return () => {\n      socket.off('chat message');\n      socket.off('users update');\n    };\n  }, []);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleJoin = () => {\n    if (username.trim()) {\n      socket.emit('join', username);\n      setJoined(true);\n    }\n  };\n\n  const sendMessage = () => {\n    if (newMessage.trim()) {\n      socket.emit('chat message', newMessage);\n      setNewMessage('');\n    }\n  };\n\n  if (!joined) {\n    return (\n      <div className=\"join-container\">\n        <h1>Join Chat</h1>\n        <input\n          type=\"text\"\n          placeholder=\"Enter username\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n        />\n        <button onClick={handleJoin}>Join</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app-container\">\n      <div className=\"chat-container\">\n        <h1>Chat</h1>\n        <div className=\"messages\" ref={messagesEndRef}>\n          {messages.map((msg, index) => (\n            <p key={index}><strong>{msg.username}:</strong> {msg.message}</p>\n          ))}\n        </div>\n        <div className=\"input-area\">\n          <input\n            type=\"text\"\n            placeholder=\"Type a message\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n          />\n          <button onClick={sendMessage}>Send</button>\n        </div>\n      </div>\n      <div className=\"users-container\">\n        <h2>Online Users ({users.length})</h2>\n        <ul>\n          {users.map((user, index) => (\n            <li key={index}>{user}</li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}